# HTTP报文

<img :src="$withBase('/HTTP/message.png')" alt="请求报文">

## 其他请求头

### Upgrade ：
升级为其他协议（websocket为101）
### Range：
实体的字节范围请求
### Location：
命令客户端重定向的 URI
### ETag：
能够表示资源唯一资源的字符串<br />
<br />

## 请求方法：
### HTTP/1.1
规定了八种方法，单词都必须是大写的形式：

1. GET：获取资源，可以理解为读取或者下载数据；
1. HEAD：获取资源的元信息；
1. POST：向资源提交数据，相当于写入或上传数据；
1. PUT：类似POST；
1. DELETE：删除资源；
1. CONNECT：建立特殊的连接隧道；
1. OPTIONS：列出可对资源实行的方法；
1. TRACE：追踪请求-响应的传输路径



## 请求状态：
### 1××
1××类状态码属于提示信息，是协议处理的中间状态，实际能够用到的时候很少<br />我们偶尔能够见到的是“101 Switching Protocols 101 Switching Protocols”。它的意思是客户端使用Upgrade头字段，要求在HTTP 协议的基础上改成其他的协议继续通信，比如WebSocket。而如果服务器也同意变更协议，就会发送状态码 101，但这之后的数据传输就不会再使用HTTP了。<br />

### 2××
2××类状态码表示服务器收到并成功处理了客户端的请求<br />
“**200 OK**”是最常见的成功状态码，表示一切正常，服务器如客户端所期望的那样返回了处理结果，如果 是非HEAD请求，通常在响应头后都会有body数据。<br />
“**204 No Content** ”是另一个很常见的成功状态码，它的含义与“200 OK”基本相同，但**响应头后没有 body数据**。所以对于Web服务器来说，正确地区分200和204是很必要的。<br />
“**206 Partial Content**”是HTTP分块下载或断点续传的基础，在客户端发送“范围请求”、要求获取资源的 部分数据时出现，它与200一样，也是服务器成功处理了请求，但body里的数据不是资源的全部，而是其中 的一部分<br />

### 3××
3××类状态码表示客户端请求的资源发生了变动，客户端必须用新的URI重新发送请求获取资源，也就是通 常所说的“重定向”，包括著名的301、302跳转。<br />
“**301 Moved Permanently **” 俗称“**永久重定向**”，含义是此次请求的资源已经不存在了，需要改用改用新 的URI再次访问<br />
“**302 Found **”，俗称“**临时重定向**”，意思是 请求的资源还在，但需要暂时用另一个URI来访问。<br />
“**304 Not Modified**”是一个比较有意思的状态码，它用于If-Modified-Since等条件请求，表示资源未修改，用于缓存控制。它不具有通常的跳转含义，但可以理解成“重定向已到缓存的文件”（即“**缓存重定向**”）。<br />

### 4××
4××类状态码表示客户端发送的请求报文有误，服务器无法处理，它就是真正的“错误码”含义了。<br />
“**400 Bad Request**”是一个通用的错误码，表示请求报文有错误，但具体是数据格式错误、缺少请求头还 是URI超长它没有明确说，只是一个笼统的错误<br />
“**403 Forbidden**”实际上不是客户端的请求出错，而是表示服务器禁止访问资源。原因可能多种多样，例 如信息敏感、法律禁止等，如果服务器友好一点，可以在body里详细说明拒绝请求的原因<br />“**404 Not Found**”可能是我们最常看见也是最不愿意看到的一个状态码，它的原意是资源在本服务器上未找到，所以无法提供给客户端。但现在已经被“用滥了”，只要服务器“不高兴”就可以给出个404，而我 们也无从得知后面到底是真的未找到，还是有什么别的原因，某种程度上它比403还要令人讨厌

- 405 Method Not Allowed：不允许使用某些方法操作资源，例如不允许POST只能GET；
- 406 Not Acceptable：资源无法满足客户端请求的条件，例如请求中文但只有英文；
- 408 Request Timeout：请求超时，服务器等待了过长的时间；
- 409 Conflict：多个请求发生了冲突，可以理解为多线程并发时的竞态；
- 413 Request Entity Too Large：请求报文里的body太大；
- 414 Request-URI Too Long：请求行里的URI太大；
- 429 Too Many Requests：客户端发送了太多的请求，通常是由于服务器的限连策略；
- 431 Request Header Fields Too Large：请求头某个字段或总体太大



### 5××
5××类状态码表示客户端请求报文正确，但服务器在处理时内部发生了错误，无法返回应有的响应数据，是 服务器端的“错误码”。<br />
“**500 Internal Server Error** ”与400类似，也是一个通用的错误码，服务器究竟发生了什么错误我们是不知 道的。不过对于服务器来说这应该算是好事，通常不应该把服务器内部的详细信息，例如出错的函数调用栈 告诉外界。虽然不利于调试，但能够防止黑客的窥探或者分析。<br />
“**501 Not Implemented**”表示客户端请求的功能还不支持，这个错误码比500要“温和”一些，和“即将 开业，敬请期待”的意思差不多，不过具体什么时候“开业”就不好说了。<br />
“**502 Bad Gateway**”通常是服务器作为网关或者代理时返回的错误码，表示服务器自身工作正常，访问后端服务器时发生了错误，但具体的错误原因也是不知道的。<br />
n“**503 Service Unavailable **”表示**服务器当前很忙，暂时无法响应服务**，我们上网时有时候遇到的“网络服 务正忙，请稍后重试”的提示信息就是状态码503。<br />

---

## 参考链接
[《 HTTP 协议完全解析 》](https://juejin.im/post/5c629c7c518825622f12da14#heading-40)<br />

