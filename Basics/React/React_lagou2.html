<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Vuepress blog demo">
    
    <link rel="preload" href="/blog/assets/css/0.styles.f2205f1c.css" as="style"><link rel="preload" href="/blog/assets/js/app.b35beac5.js" as="script"><link rel="preload" href="/blog/assets/js/2.682d0a90.js" as="script"><link rel="preload" href="/blog/assets/js/63.a4261fcd.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.3df05345.js"><link rel="prefetch" href="/blog/assets/js/100.f07bd8a3.js"><link rel="prefetch" href="/blog/assets/js/101.8d7fa18d.js"><link rel="prefetch" href="/blog/assets/js/102.3b30f4cd.js"><link rel="prefetch" href="/blog/assets/js/103.f05a8e53.js"><link rel="prefetch" href="/blog/assets/js/104.b68a4f02.js"><link rel="prefetch" href="/blog/assets/js/105.cd4aa364.js"><link rel="prefetch" href="/blog/assets/js/106.28221a6a.js"><link rel="prefetch" href="/blog/assets/js/107.507b082b.js"><link rel="prefetch" href="/blog/assets/js/108.cebbf301.js"><link rel="prefetch" href="/blog/assets/js/109.f504b091.js"><link rel="prefetch" href="/blog/assets/js/11.b1d263b3.js"><link rel="prefetch" href="/blog/assets/js/110.069a8922.js"><link rel="prefetch" href="/blog/assets/js/111.d584214d.js"><link rel="prefetch" href="/blog/assets/js/112.d380954b.js"><link rel="prefetch" href="/blog/assets/js/113.809c70ce.js"><link rel="prefetch" href="/blog/assets/js/114.ca9f1122.js"><link rel="prefetch" href="/blog/assets/js/115.0fa65b85.js"><link rel="prefetch" href="/blog/assets/js/116.99aa97f1.js"><link rel="prefetch" href="/blog/assets/js/117.3acd12ba.js"><link rel="prefetch" href="/blog/assets/js/118.348d07bc.js"><link rel="prefetch" href="/blog/assets/js/119.9628df0b.js"><link rel="prefetch" href="/blog/assets/js/12.3a0d975b.js"><link rel="prefetch" href="/blog/assets/js/120.c4d204ef.js"><link rel="prefetch" href="/blog/assets/js/121.6d51a34c.js"><link rel="prefetch" href="/blog/assets/js/122.ddf55674.js"><link rel="prefetch" href="/blog/assets/js/123.3303eeef.js"><link rel="prefetch" href="/blog/assets/js/124.cede9fe1.js"><link rel="prefetch" href="/blog/assets/js/125.da9901a7.js"><link rel="prefetch" href="/blog/assets/js/126.5fc0bd68.js"><link rel="prefetch" href="/blog/assets/js/127.3ec40742.js"><link rel="prefetch" href="/blog/assets/js/128.801f358c.js"><link rel="prefetch" href="/blog/assets/js/129.ad9ec688.js"><link rel="prefetch" href="/blog/assets/js/13.7fda60d1.js"><link rel="prefetch" href="/blog/assets/js/130.dd3a8d57.js"><link rel="prefetch" href="/blog/assets/js/131.7c4995b3.js"><link rel="prefetch" href="/blog/assets/js/132.0aca25e1.js"><link rel="prefetch" href="/blog/assets/js/133.6ce294a4.js"><link rel="prefetch" href="/blog/assets/js/134.7882f49f.js"><link rel="prefetch" href="/blog/assets/js/135.3f218e5d.js"><link rel="prefetch" href="/blog/assets/js/136.a6b7d856.js"><link rel="prefetch" href="/blog/assets/js/137.b766aee1.js"><link rel="prefetch" href="/blog/assets/js/138.549a5e9c.js"><link rel="prefetch" href="/blog/assets/js/139.998d9d89.js"><link rel="prefetch" href="/blog/assets/js/14.cf14c2a9.js"><link rel="prefetch" href="/blog/assets/js/140.0c0f06a0.js"><link rel="prefetch" href="/blog/assets/js/141.2276ef39.js"><link rel="prefetch" href="/blog/assets/js/142.bfd53d68.js"><link rel="prefetch" href="/blog/assets/js/143.202041cd.js"><link rel="prefetch" href="/blog/assets/js/144.3eaad81c.js"><link rel="prefetch" href="/blog/assets/js/145.528680fa.js"><link rel="prefetch" href="/blog/assets/js/146.077be184.js"><link rel="prefetch" href="/blog/assets/js/147.b84c93d8.js"><link rel="prefetch" href="/blog/assets/js/148.ee3fa227.js"><link rel="prefetch" href="/blog/assets/js/149.f4e90e38.js"><link rel="prefetch" href="/blog/assets/js/15.f96716d1.js"><link rel="prefetch" href="/blog/assets/js/150.39f8ddab.js"><link rel="prefetch" href="/blog/assets/js/151.b9f837e5.js"><link rel="prefetch" href="/blog/assets/js/152.d0dbef66.js"><link rel="prefetch" href="/blog/assets/js/153.aeeb9602.js"><link rel="prefetch" href="/blog/assets/js/154.920a6168.js"><link rel="prefetch" href="/blog/assets/js/155.7d526177.js"><link rel="prefetch" href="/blog/assets/js/156.5c6f22ca.js"><link rel="prefetch" href="/blog/assets/js/157.cf68686f.js"><link rel="prefetch" href="/blog/assets/js/158.a02b55dd.js"><link rel="prefetch" href="/blog/assets/js/159.8f9944bd.js"><link rel="prefetch" href="/blog/assets/js/16.195167c6.js"><link rel="prefetch" href="/blog/assets/js/160.31a63520.js"><link rel="prefetch" href="/blog/assets/js/161.eb39414b.js"><link rel="prefetch" href="/blog/assets/js/162.754a517a.js"><link rel="prefetch" href="/blog/assets/js/163.68e43ef1.js"><link rel="prefetch" href="/blog/assets/js/164.a356ccb1.js"><link rel="prefetch" href="/blog/assets/js/165.77fd3132.js"><link rel="prefetch" href="/blog/assets/js/166.3a4921ad.js"><link rel="prefetch" href="/blog/assets/js/167.c8f5c03f.js"><link rel="prefetch" href="/blog/assets/js/168.8d53ab88.js"><link rel="prefetch" href="/blog/assets/js/169.990639b4.js"><link rel="prefetch" href="/blog/assets/js/17.fd665c38.js"><link rel="prefetch" href="/blog/assets/js/170.b4ec4c01.js"><link rel="prefetch" href="/blog/assets/js/171.3896da51.js"><link rel="prefetch" href="/blog/assets/js/172.23b916e2.js"><link rel="prefetch" href="/blog/assets/js/173.a47f1f03.js"><link rel="prefetch" href="/blog/assets/js/174.01aef061.js"><link rel="prefetch" href="/blog/assets/js/175.25c591ae.js"><link rel="prefetch" href="/blog/assets/js/176.5242af1c.js"><link rel="prefetch" href="/blog/assets/js/177.211537b5.js"><link rel="prefetch" href="/blog/assets/js/178.b80c1f2a.js"><link rel="prefetch" href="/blog/assets/js/179.9db70c44.js"><link rel="prefetch" href="/blog/assets/js/18.27f3772e.js"><link rel="prefetch" href="/blog/assets/js/180.981005b5.js"><link rel="prefetch" href="/blog/assets/js/181.6c5eae61.js"><link rel="prefetch" href="/blog/assets/js/182.0655c9d0.js"><link rel="prefetch" href="/blog/assets/js/183.2ac08858.js"><link rel="prefetch" href="/blog/assets/js/184.e23ff829.js"><link rel="prefetch" href="/blog/assets/js/185.3f5723c2.js"><link rel="prefetch" href="/blog/assets/js/186.d135cd17.js"><link rel="prefetch" href="/blog/assets/js/187.14415d45.js"><link rel="prefetch" href="/blog/assets/js/188.963bf4f2.js"><link rel="prefetch" href="/blog/assets/js/189.61636fbe.js"><link rel="prefetch" href="/blog/assets/js/19.8f9c1f1a.js"><link rel="prefetch" href="/blog/assets/js/190.4573ad14.js"><link rel="prefetch" href="/blog/assets/js/191.1a976e6b.js"><link rel="prefetch" href="/blog/assets/js/192.6ede8a6f.js"><link rel="prefetch" href="/blog/assets/js/193.5daaeb6b.js"><link rel="prefetch" href="/blog/assets/js/194.e7154779.js"><link rel="prefetch" href="/blog/assets/js/195.d2d91f81.js"><link rel="prefetch" href="/blog/assets/js/196.13ba1150.js"><link rel="prefetch" href="/blog/assets/js/197.81f02ec1.js"><link rel="prefetch" href="/blog/assets/js/198.3ca0f65e.js"><link rel="prefetch" href="/blog/assets/js/199.b10de882.js"><link rel="prefetch" href="/blog/assets/js/20.cacca9ec.js"><link rel="prefetch" href="/blog/assets/js/200.aaf4a04b.js"><link rel="prefetch" href="/blog/assets/js/201.0809263f.js"><link rel="prefetch" href="/blog/assets/js/202.41f58fbc.js"><link rel="prefetch" href="/blog/assets/js/203.d91251c0.js"><link rel="prefetch" href="/blog/assets/js/204.9954e4b1.js"><link rel="prefetch" href="/blog/assets/js/205.aec2e51d.js"><link rel="prefetch" href="/blog/assets/js/206.9d05cbf3.js"><link rel="prefetch" href="/blog/assets/js/207.f19b0bfa.js"><link rel="prefetch" href="/blog/assets/js/208.d855e7e9.js"><link rel="prefetch" href="/blog/assets/js/209.1d3482d9.js"><link rel="prefetch" href="/blog/assets/js/21.bc0e92af.js"><link rel="prefetch" href="/blog/assets/js/210.614db0dc.js"><link rel="prefetch" href="/blog/assets/js/211.d6b806c6.js"><link rel="prefetch" href="/blog/assets/js/212.e394e4d1.js"><link rel="prefetch" href="/blog/assets/js/213.7a4d9f05.js"><link rel="prefetch" href="/blog/assets/js/214.7ad0c7a2.js"><link rel="prefetch" href="/blog/assets/js/215.cb48ebd5.js"><link rel="prefetch" href="/blog/assets/js/216.3e892278.js"><link rel="prefetch" href="/blog/assets/js/217.050946e2.js"><link rel="prefetch" href="/blog/assets/js/218.746d98bd.js"><link rel="prefetch" href="/blog/assets/js/219.7b157261.js"><link rel="prefetch" href="/blog/assets/js/22.9a71c05d.js"><link rel="prefetch" href="/blog/assets/js/220.78c06a24.js"><link rel="prefetch" href="/blog/assets/js/221.3088f435.js"><link rel="prefetch" href="/blog/assets/js/222.af8f07d2.js"><link rel="prefetch" href="/blog/assets/js/223.6756b8d7.js"><link rel="prefetch" href="/blog/assets/js/224.3e06542f.js"><link rel="prefetch" href="/blog/assets/js/225.485a8558.js"><link rel="prefetch" href="/blog/assets/js/226.463949be.js"><link rel="prefetch" href="/blog/assets/js/227.145a595f.js"><link rel="prefetch" href="/blog/assets/js/228.4f333e47.js"><link rel="prefetch" href="/blog/assets/js/229.5ad840a9.js"><link rel="prefetch" href="/blog/assets/js/23.5fb2219a.js"><link rel="prefetch" href="/blog/assets/js/230.7beffeb9.js"><link rel="prefetch" href="/blog/assets/js/231.d317a9cc.js"><link rel="prefetch" href="/blog/assets/js/232.4fb95e06.js"><link rel="prefetch" href="/blog/assets/js/233.057a8db7.js"><link rel="prefetch" href="/blog/assets/js/234.d1b4cf5b.js"><link rel="prefetch" href="/blog/assets/js/235.4639ff8f.js"><link rel="prefetch" href="/blog/assets/js/236.6972a0a3.js"><link rel="prefetch" href="/blog/assets/js/237.ac6a67cf.js"><link rel="prefetch" href="/blog/assets/js/238.f4a53c56.js"><link rel="prefetch" href="/blog/assets/js/239.204d7eec.js"><link rel="prefetch" href="/blog/assets/js/24.44a15fff.js"><link rel="prefetch" href="/blog/assets/js/240.2849b088.js"><link rel="prefetch" href="/blog/assets/js/241.89dd0f9f.js"><link rel="prefetch" href="/blog/assets/js/242.dc5084fa.js"><link rel="prefetch" href="/blog/assets/js/243.9579509b.js"><link rel="prefetch" href="/blog/assets/js/244.97d12399.js"><link rel="prefetch" href="/blog/assets/js/245.dc594908.js"><link rel="prefetch" href="/blog/assets/js/246.721dd9a8.js"><link rel="prefetch" href="/blog/assets/js/247.87648bf4.js"><link rel="prefetch" href="/blog/assets/js/248.70c7df32.js"><link rel="prefetch" href="/blog/assets/js/249.16a1cde0.js"><link rel="prefetch" href="/blog/assets/js/25.89dc545d.js"><link rel="prefetch" href="/blog/assets/js/250.0e166de4.js"><link rel="prefetch" href="/blog/assets/js/251.b5d8e0da.js"><link rel="prefetch" href="/blog/assets/js/252.2d064b50.js"><link rel="prefetch" href="/blog/assets/js/253.cbfda324.js"><link rel="prefetch" href="/blog/assets/js/254.3a4e2c15.js"><link rel="prefetch" href="/blog/assets/js/255.45de8b25.js"><link rel="prefetch" href="/blog/assets/js/256.b8448c5e.js"><link rel="prefetch" href="/blog/assets/js/257.c6c61e52.js"><link rel="prefetch" href="/blog/assets/js/258.f8b31880.js"><link rel="prefetch" href="/blog/assets/js/259.6cb09e21.js"><link rel="prefetch" href="/blog/assets/js/26.8f105a56.js"><link rel="prefetch" href="/blog/assets/js/260.f7cf0743.js"><link rel="prefetch" href="/blog/assets/js/261.f76acde6.js"><link rel="prefetch" href="/blog/assets/js/262.149fd1cb.js"><link rel="prefetch" href="/blog/assets/js/263.5a6eed66.js"><link rel="prefetch" href="/blog/assets/js/264.90db1884.js"><link rel="prefetch" href="/blog/assets/js/265.91ad6d94.js"><link rel="prefetch" href="/blog/assets/js/266.bc49cf52.js"><link rel="prefetch" href="/blog/assets/js/267.d305887f.js"><link rel="prefetch" href="/blog/assets/js/268.c008b8f8.js"><link rel="prefetch" href="/blog/assets/js/269.8264738f.js"><link rel="prefetch" href="/blog/assets/js/27.81f7e9df.js"><link rel="prefetch" href="/blog/assets/js/270.b9778672.js"><link rel="prefetch" href="/blog/assets/js/271.d01d7b00.js"><link rel="prefetch" href="/blog/assets/js/272.0651ffe6.js"><link rel="prefetch" href="/blog/assets/js/273.e7e19eee.js"><link rel="prefetch" href="/blog/assets/js/274.a9f0e489.js"><link rel="prefetch" href="/blog/assets/js/275.36f70466.js"><link rel="prefetch" href="/blog/assets/js/276.181ecbcb.js"><link rel="prefetch" href="/blog/assets/js/277.ccf90e7a.js"><link rel="prefetch" href="/blog/assets/js/278.43bac85d.js"><link rel="prefetch" href="/blog/assets/js/279.bc082c54.js"><link rel="prefetch" href="/blog/assets/js/28.e2deea9c.js"><link rel="prefetch" href="/blog/assets/js/280.40d03712.js"><link rel="prefetch" href="/blog/assets/js/281.be4ef386.js"><link rel="prefetch" href="/blog/assets/js/282.1c7ab9b8.js"><link rel="prefetch" href="/blog/assets/js/283.5fdf63ff.js"><link rel="prefetch" href="/blog/assets/js/284.882db2a3.js"><link rel="prefetch" href="/blog/assets/js/285.c3db92e6.js"><link rel="prefetch" href="/blog/assets/js/286.1cadb6ea.js"><link rel="prefetch" href="/blog/assets/js/287.5ca29da0.js"><link rel="prefetch" href="/blog/assets/js/288.92bf3a44.js"><link rel="prefetch" href="/blog/assets/js/289.3133a186.js"><link rel="prefetch" href="/blog/assets/js/29.94bdd834.js"><link rel="prefetch" href="/blog/assets/js/290.6f754652.js"><link rel="prefetch" href="/blog/assets/js/291.291fb48c.js"><link rel="prefetch" href="/blog/assets/js/292.5a014815.js"><link rel="prefetch" href="/blog/assets/js/293.e207dfb2.js"><link rel="prefetch" href="/blog/assets/js/294.587f5ded.js"><link rel="prefetch" href="/blog/assets/js/295.54a160df.js"><link rel="prefetch" href="/blog/assets/js/296.176760a0.js"><link rel="prefetch" href="/blog/assets/js/297.541f5af8.js"><link rel="prefetch" href="/blog/assets/js/298.1ac2e7f2.js"><link rel="prefetch" href="/blog/assets/js/299.0c6862ac.js"><link rel="prefetch" href="/blog/assets/js/3.83e24637.js"><link rel="prefetch" href="/blog/assets/js/30.7d2479fd.js"><link rel="prefetch" href="/blog/assets/js/31.c99f0a8e.js"><link rel="prefetch" href="/blog/assets/js/32.3da7ba35.js"><link rel="prefetch" href="/blog/assets/js/33.b09f65ed.js"><link rel="prefetch" href="/blog/assets/js/34.31e1d067.js"><link rel="prefetch" href="/blog/assets/js/35.93e236cd.js"><link rel="prefetch" href="/blog/assets/js/36.28b381aa.js"><link rel="prefetch" href="/blog/assets/js/37.44c61a44.js"><link rel="prefetch" href="/blog/assets/js/38.3f636bf0.js"><link rel="prefetch" href="/blog/assets/js/39.c698a237.js"><link rel="prefetch" href="/blog/assets/js/4.3444eccd.js"><link rel="prefetch" href="/blog/assets/js/40.04996fd3.js"><link rel="prefetch" href="/blog/assets/js/41.1bfea812.js"><link rel="prefetch" href="/blog/assets/js/42.993ffa9b.js"><link rel="prefetch" href="/blog/assets/js/43.533da78c.js"><link rel="prefetch" href="/blog/assets/js/44.dbd7508a.js"><link rel="prefetch" href="/blog/assets/js/45.5eefbbc7.js"><link rel="prefetch" href="/blog/assets/js/46.aa6651a9.js"><link rel="prefetch" href="/blog/assets/js/47.c2b03798.js"><link rel="prefetch" href="/blog/assets/js/48.34b28bf3.js"><link rel="prefetch" href="/blog/assets/js/49.35210135.js"><link rel="prefetch" href="/blog/assets/js/5.4a2b743b.js"><link rel="prefetch" href="/blog/assets/js/50.7bc9a881.js"><link rel="prefetch" href="/blog/assets/js/51.cae6a480.js"><link rel="prefetch" href="/blog/assets/js/52.0f920a4b.js"><link rel="prefetch" href="/blog/assets/js/53.bc8a6149.js"><link rel="prefetch" href="/blog/assets/js/54.b645e52b.js"><link rel="prefetch" href="/blog/assets/js/55.4d5d9fde.js"><link rel="prefetch" href="/blog/assets/js/56.31695c8c.js"><link rel="prefetch" href="/blog/assets/js/57.15b78064.js"><link rel="prefetch" href="/blog/assets/js/58.7662adfd.js"><link rel="prefetch" href="/blog/assets/js/59.b46d89d8.js"><link rel="prefetch" href="/blog/assets/js/6.99c480b3.js"><link rel="prefetch" href="/blog/assets/js/60.2006bf85.js"><link rel="prefetch" href="/blog/assets/js/61.fb881b10.js"><link rel="prefetch" href="/blog/assets/js/62.bd321f2f.js"><link rel="prefetch" href="/blog/assets/js/64.ce37ad09.js"><link rel="prefetch" href="/blog/assets/js/65.2eef0058.js"><link rel="prefetch" href="/blog/assets/js/66.ee8a89d3.js"><link rel="prefetch" href="/blog/assets/js/67.2b247435.js"><link rel="prefetch" href="/blog/assets/js/68.918cc04d.js"><link rel="prefetch" href="/blog/assets/js/69.ee67cfb4.js"><link rel="prefetch" href="/blog/assets/js/7.cca9e08d.js"><link rel="prefetch" href="/blog/assets/js/70.e6e9c8d3.js"><link rel="prefetch" href="/blog/assets/js/71.6a1a0a1b.js"><link rel="prefetch" href="/blog/assets/js/72.61abbffe.js"><link rel="prefetch" href="/blog/assets/js/73.f01c1218.js"><link rel="prefetch" href="/blog/assets/js/74.d31fa142.js"><link rel="prefetch" href="/blog/assets/js/75.5aa11a4c.js"><link rel="prefetch" href="/blog/assets/js/76.efeb2798.js"><link rel="prefetch" href="/blog/assets/js/77.46e21469.js"><link rel="prefetch" href="/blog/assets/js/78.19b98be0.js"><link rel="prefetch" href="/blog/assets/js/79.e05a2ad8.js"><link rel="prefetch" href="/blog/assets/js/8.41528c26.js"><link rel="prefetch" href="/blog/assets/js/80.dbab2627.js"><link rel="prefetch" href="/blog/assets/js/81.c5d24f07.js"><link rel="prefetch" href="/blog/assets/js/82.131ddf93.js"><link rel="prefetch" href="/blog/assets/js/83.6ca9f6a7.js"><link rel="prefetch" href="/blog/assets/js/84.f808c3ac.js"><link rel="prefetch" href="/blog/assets/js/85.cbefbfa8.js"><link rel="prefetch" href="/blog/assets/js/86.4a7f32eb.js"><link rel="prefetch" href="/blog/assets/js/87.8efa50f4.js"><link rel="prefetch" href="/blog/assets/js/88.8d2dc6ff.js"><link rel="prefetch" href="/blog/assets/js/89.4bef8cac.js"><link rel="prefetch" href="/blog/assets/js/9.cf264bd8.js"><link rel="prefetch" href="/blog/assets/js/90.909bd263.js"><link rel="prefetch" href="/blog/assets/js/91.17882672.js"><link rel="prefetch" href="/blog/assets/js/92.907e98d7.js"><link rel="prefetch" href="/blog/assets/js/93.8d774d90.js"><link rel="prefetch" href="/blog/assets/js/94.5fb38543.js"><link rel="prefetch" href="/blog/assets/js/95.13694604.js"><link rel="prefetch" href="/blog/assets/js/96.1217dc71.js"><link rel="prefetch" href="/blog/assets/js/97.4893e5cb.js"><link rel="prefetch" href="/blog/assets/js/98.099aa011.js"><link rel="prefetch" href="/blog/assets/js/99.e42164f4.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.f2205f1c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Basics/" class="nav-link router-link-active">
  前端基础
</a></li></ul></div></div><div class="nav-item"><a href="/blog/leetcode/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/blog/FontEndArt/" class="nav-link">
  做题咯
</a></div><div class="nav-item"><a href="/blog/book/" class="nav-link">
  读书咯
</a></div> <a href="https://github.com/chelseachen007/Blog.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    My GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Basics/" class="nav-link router-link-active">
  前端基础
</a></li></ul></div></div><div class="nav-item"><a href="/blog/leetcode/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/blog/FontEndArt/" class="nav-link">
  做题咯
</a></div><div class="nav-item"><a href="/blog/book/" class="nav-link">
  读书咯
</a></div> <a href="https://github.com/chelseachen007/Blog.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    My GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/blog/Basics/" aria-current="page" class="sidebar-link">如何学习</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTTP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Chorme</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>React</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Basics/React/React_Redux.html" class="sidebar-link">Redux</a></li><li><a href="/blog/Basics/React/React_fiber.html" class="sidebar-link">React 更新策略</a></li><li><a href="/blog/Basics/React/React_hooks.html" class="sidebar-link">Hooks</a></li><li><a href="/blog/Basics/React/React_development.html" class="sidebar-link">React发展</a></li><li><a href="/blog/Basics/React/React_lagou.html" class="sidebar-link">React</a></li><li><a href="/blog/Basics/React/React_lagou2.html" aria-current="page" class="active sidebar-link">/Basics/React/React_lagou2.html</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#常见问题" class="sidebar-link">常见问题</a></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#基础知识" class="sidebar-link">基础知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#jsx" class="sidebar-link">JSX</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#react-生命周期" class="sidebar-link">React 生命周期</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#react-16-3" class="sidebar-link">React 16.3</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#react-数据通信" class="sidebar-link">React 数据通信</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#context" class="sidebar-link">Context</a></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#过时的context" class="sidebar-link">过时的Context</a></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#redux" class="sidebar-link">Redux</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#hooks" class="sidebar-link">Hooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#函数组件与类组件" class="sidebar-link">函数组件与类组件</a></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#类组件" class="sidebar-link">类组件</a></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#函数组件" class="sidebar-link">函数组件</a></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#为什么需要-react-hooks" class="sidebar-link">为什么需要 React-Hooks”</a></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#使用原则" class="sidebar-link">使用原则</a></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#原理" class="sidebar-link">原理</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#虚拟dom" class="sidebar-link">虚拟DOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#发展" class="sidebar-link">发展</a></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#价值" class="sidebar-link">价值</a></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#栈调和" class="sidebar-link">栈调和</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#setstate-是同步还是异步的" class="sidebar-link">setState 是同步还是异步的</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#主流程" class="sidebar-link">主流程：</a></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#锁结构" class="sidebar-link">锁结构</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#fiber" class="sidebar-link">Fiber</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Basics/React/React_lagou2.html#" class="sidebar-link"></a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目难点总结</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p>如果做完这个笔记，还需要回头看原文，那么讲毫无意义。</p></blockquote> <h1 id="深入浅出搞定react"><a href="#深入浅出搞定react" class="header-anchor">#</a> 深入浅出搞定React</h1> <h2 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h2> <p>React的声明周期，对比15 16的区别</p> <p>diff算法以及实现</p> <p>React是什么样的框架，和Vue的对比</p> <p>React的介绍以及原理实现</p> <h2 id="基础知识"><a href="#基础知识" class="header-anchor">#</a> 基础知识</h2> <h3 id="jsx"><a href="#jsx" class="header-anchor">#</a> JSX</h3> <ul><li><p>JSX 的本质是什么，它和 JS 之间到底是什么关系？</p></li> <li><p>为什么要用 JSX？不用会有什么后果？</p></li> <li><p>JSX 背后的功能模块是什么，这个功能模块都做了哪些事情？</p></li></ul> <p>Facebook 公司给 JSX 的定位是 JavaScript 的“扩展”，他在js编译后，会变成React.createElement，这个编译过程使用的就是 <code>Babel</code></p> <p>JSX 语法糖允许前端开发者使用我们最为熟悉的类 HTML 标签语法来创建虚拟 DOM，在降低学习成本的同时，也提升了研发效率与研发体验。</p> <p><img src="https://s0.lgstatic.com/i/image/M00/5C/69/Ciqc1F-BeuGAepNsAACqreYXrj0410.png" alt="Drawing 3.png"></p> <p><strong>在实际的面试场景下，许多候选人由于缺乏对源码的了解，谈及 createElement 时总会倾向于去夸大它的“工作量”</strong>。但其实，相信你也已经发现了，createElement 中并没有十分复杂的涉及算法或真实 DOM 的逻辑，它的<strong>每一个步骤几乎都是在格式化数据</strong>。</p> <p>可以联想到字节码和机器码之间的转换</p> <p><img src="https://s0.lgstatic.com/i/image/M00/5C/74/CgqCHl-Bex6AM5rhAACJMrix5bk913.png" alt="Drawing 7.png"></p> <p>ReactElement 就是我们常说的虚拟DOM, 他和真实DOM之间还有个 <strong>ReactDOM</strong>.render()</p> <h2 id="react-生命周期"><a href="#react-生命周期" class="header-anchor">#</a> React 生命周期</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// React 15</span>
<span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">componentWillUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="https://s0.lgstatic.com/i/image/M00/5E/31/Ciqc1F-GZbGAGNcBAAE775qohj8453.png" alt="1.png"></p> <p>组件的更新分为两种：一种是由父组件更新触发的更新；另一种是组件自身调用自己的 setState 触发的更新。</p> <blockquote><p><strong>componentReceiveProps 并不是由 props 的变化触发的，而是由父组件的更新触发的</strong>，这个结论，请你谨记。</p></blockquote> <h3 id="react-16-3"><a href="#react-16-3" class="header-anchor">#</a> React 16.3</h3> <p><img src="https://s0.lgstatic.com/i/image/M00/5D/D9/CgqCHl-FVVeAaMJvAAKXOyLlUwM592.png" alt="Drawing 0.png"></p> <p>React 15 生命周期和 React 16.3 生命周期在挂载阶段的主要差异在于，<strong>废弃了 componentWillMount，新增了 getDerivedStateFromProps</strong>。</p> <p><strong>消失的 componentWillUpdate 与新增的 getSnapshotBeforeUpdate</strong></p> <p>区别在于 <strong>getSnapshotBeforeUpdate 的返回值会作为第三个参数给到 componentDidUpdate</strong>。<strong>它的执行时机是在 render 方法之后，真实 DOM 更新之前</strong>。在这个阶段里，我们可以<strong>同时获取到更新前的真实 DOM 和更新前后的 state&amp;props 信息</strong>。</p> <blockquote><p>这个生命周期的设计初衷，是为了“与 componentDidUpdate 一起，涵盖过时的 componentWillUpdate 的所有用例”（引用自 React 官网）。</p></blockquote> <h4 id="为什么要去除掉-componentwillupdate"><a href="#为什么要去除掉-componentwillupdate" class="header-anchor">#</a> 为什么要去除掉 componentWillUpdate</h4> <p>因为react 15是同步进行渲染，同步渲染的递归栈是非常深的，而且不能打断，这样就很容易一直占据着主线程，直到递归结束释放主线程**。在这个过程中，浏览器没有办法处理任何渲染之外的事情，会进入一种无法处理用户交互**的状态。因此若渲染时间稍微长一点，页面就会面临卡顿甚至卡死的风险。</p> <p>在 Fiber 机制下，<strong>render 阶段是允许暂停、终止和重启的</strong>。当一个任务执行到一半被打断后，下一次渲染线程抢回主动权时，这个任务被重启的形式是“重复执行一遍整个任务”而非“接着上次执行到的那行代码往下走”。<strong>这就导致 render 阶段的生命周期都是有可能被重复执行的</strong>。</p> <p>我们再来看看 React 16 打算废弃的是哪些生命周期：</p> <ul><li>componentWillMount；</li> <li>componentWillUpdate；</li> <li>componentWillReceiveProps。</li></ul> <p>这些生命周期的共性，<strong>就是它们都处于 render 阶段，都可能重复被执行</strong>，而且由于这些 API 常年被滥用，它们在重复执行的过程中都存在着不可小觑的风险。</p> <p><a href="https://zh-hans.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html%C3%8F" target="_blank" rel="noopener noreferrer">React 团队给出的这篇文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 就帮助大家规避“误操作”来说是绰绰有余的。</p> <h2 id="react-数据通信"><a href="#react-数据通信" class="header-anchor">#</a> React 数据通信</h2> <p>所谓<strong>单向数据流</strong>，指的就是当前组件的 state 以 props 的形式流动时，只能流向组件树中比自己层级更低的组件。</p> <ul><li>父 - 子 props</li> <li>子 - 父  传递方法</li> <li>兄弟组件  通过连接同一个属性值 进行并且传递方法</li> <li>跨层级  事件中心 发布中心</li></ul> <h3 id="context"><a href="#context" class="header-anchor">#</a> Context</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> AppContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Provider<span class="token punctuation">,</span> Consumer <span class="token punctuation">}</span> <span class="token operator">=</span> AppContext


<span class="token comment">//Provider</span>
<span class="token operator">&lt;</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>title<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>title<span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>content<span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Title <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Content <span class="token operator">/</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>

<span class="token comment">//Consumer</span>
<span class="token operator">&lt;</span>Consumer<span class="token operator">&gt;</span>
  <span class="token punctuation">{</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>value<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Consumer<span class="token operator">&gt;</span>
</code></pre></div><h3 id="过时的context"><a href="#过时的context" class="header-anchor">#</a> 过时的Context</h3> <ul><li><strong>代码不够优雅</strong></li> <li>如果组件提供的一个Context发生了变化，而中间父组件的 shouldComponentUpdate 返回 false，<strong>那么使用到该值的后代组件不会进行更新</strong>。使用了 Context 的组件则完全失控，所以基本上没有办法能够可靠的更新 Context。<a href="https://medium.com/@mweststrate/how-to-safely-use-react-context-b7e343eff076" target="_blank" rel="noopener noreferrer">这篇博客文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>很好地解释了为何会出现此类问题，以及你该如何规避它。  ——React 官方</li></ul> <h3 id="redux"><a href="#redux" class="header-anchor">#</a> Redux</h3> <h2 id="hooks"><a href="#hooks" class="header-anchor">#</a> Hooks</h2> <p>React-Hooks 自 <strong>React 16.8 以来</strong>才真正被推而广之</p> <h3 id="函数组件与类组件"><a href="#函数组件与类组件" class="header-anchor">#</a> 函数组件与类组件</h3> <p>函数组件与类组件的对比：无关“优劣”，只谈“不同”</p> <ul><li>类组件需要继承 class，函数组件不需要；</li> <li>类组件可以访问生命周期方法，函数组件不能；</li> <li>类组件中可以获取到实例化后的 this，并基于这个 this 做各种各样的事情，而函数组件不可以；</li> <li>类组件中可以定义并维护 state（状态），而函数组件不可以；</li> <li>......</li></ul> <h3 id="类组件"><a href="#类组件" class="header-anchor">#</a> 类组件</h3> <p>React 类组件内部预置了相当多的“现成的东西”等着你去调度/定制，state 和生命周期就是这些“现成东西”中的典型。要想得到这些东西，难度也不大，你只需要轻轻地<strong>继承</strong>一个 React.Component 即可。</p> <p><strong>但是 多就是好吗</strong></p> <p>他增加了我们的学习成本，这时就显得类组件太重了。</p> <h3 id="函数组件"><a href="#函数组件" class="header-anchor">#</a> 函数组件</h3> <p>，函数组件肉眼可见的特质自然包括轻量、灵活、易于组织和维护、较低的学习成本等。这些要素毫无疑问是重要的，它们也确实驱动着 React 团队做出改变。但是除此之外，还有一个非常容易被大家忽视、也极少有人能真正理解到的知识点，我在这里要着重讲一下。这个知识点缘起于 React 作者 Dan 早期特意为类组件和函数组件写过的<a href="https://overreacted.io/how-are-function-components-different-from-classes/" target="_blank" rel="noopener noreferrer">一篇非常棒的对比文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，这篇文章很长，但是通篇都在论证这一句话：</p> <blockquote><p><strong>函数组件会捕获 render 内部的状态，这是两类组件最大的不同。</strong></p></blockquote> <p><strong>函数组件更加契合 React 框架的设计理念</strong>。</p> <blockquote><p>UI = render(data)</p></blockquote> <h3 id="为什么需要-react-hooks"><a href="#为什么需要-react-hooks" class="header-anchor">#</a> 为什么需要 React-Hooks”</h3> <ol><li><h4 id="告别难以理解的-class-把握-class-的两大-痛点"><a href="#告别难以理解的-class-把握-class-的两大-痛点" class="header-anchor">#</a> 告别难以理解的 Class：把握 Class 的两大“痛点”</h4> <p><strong>this 和生命周期</strong>两个痛点</p></li> <li><h4 id="hooks-如何实现更好的逻辑拆分"><a href="#hooks-如何实现更好的逻辑拆分" class="header-anchor">#</a> Hooks 如何实现更好的逻辑拆分</h4> <p>**<em>*我们可以有专门管理订阅的函数组件、专门处理 DOM 的函数组件、专门获取数据的函数组件等。Hooks 能够帮助我们*<em>实现业务逻辑的聚合，避免复杂的组件和冗余的代码</em></em>。</p></li> <li><h4 id="状态复用-hooks-将复杂的问题变简单"><a href="#状态复用-hooks-将复杂的问题变简单" class="header-anchor">#</a> 状态复用：Hooks 将复杂的问题变简单</h4></li></ol> <h3 id="使用原则"><a href="#使用原则" class="header-anchor">#</a> 使用原则</h3> <p>使用原则，原则的内容如下：</p> <ol><li>只在 React 函数中调用 Hook；</li> <li>不要在循环、条件或嵌套函数中调用 Hook。</li></ol> <h3 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h3> <p><strong>从源码调用流程看原理：Hooks 的正常运作，在底层依赖于顺序链表</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mountWorkInProgressHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">// 注意，单个 hook 是以对象的形式存在的</span>
  <span class="token keyword">var</span> hook <span class="token operator">=</span> <span class="token punctuation">{</span>
    memoizedState<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    baseState<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    baseQueue<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    queue<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    next<span class="token operator">:</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>workInProgressHook <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这行代码每个 React 版本不太一样，但做的都是同一件事：将 hook 作为链表的头节点处理</span>
    firstWorkInProgressHook <span class="token operator">=</span> workInProgressHook <span class="token operator">=</span> hook<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 若链表不为空，则将 hook 追加到链表尾部</span>
    workInProgressHook <span class="token operator">=</span> workInProgressHook<span class="token punctuation">.</span>next <span class="token operator">=</span> hook<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 返回当前的 hook</span>
  <span class="token keyword">return</span> workInProgressHook<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>到这里可以看出，<strong>hook 相关的所有信息收敛在一个 hook 对象里，而 hook 对象之间以单向链表的形式相互串联</strong>。</p> <h2 id="虚拟dom"><a href="#虚拟dom" class="header-anchor">#</a> 虚拟DOM</h2> <h3 id="发展"><a href="#发展" class="header-anchor">#</a> 发展</h3> <ol><li><p>原生 JS 支配下的“人肉 DOM” 时期</p></li> <li><p>解放生产力的先导阶段：jQuery 时期</p> <p>对DOM API进行封装</p></li> <li><p>民智初启：早期模板引擎方案</p> <p>它更新 DOM 的方式是将已经渲染出 DOM 整体注销后再整体重渲染，并且不存在更新缓冲这一说。所以有性能上的问题</p></li> <li><p>全自动:虚拟DOM</p> <p><strong>虚拟 DOM 的优越之处在于，它能够在提供更爽、更高效的研发模式（也就是函数式的 UI 编程方式）的同时，仍然保持一个还不错的性能</strong>。</p> <p>误区：虚拟DOM性能上具有优势，<strong>虚拟 DOM 的劣势主要在于 JS 计算的耗时，而 DOM 操作的能耗和 JS 计算的能耗根本不在一个量级</strong>。但是在实际使用中，频繁的setState这种修改少量信息的情况下，虚拟DOM具有性能上的优势。</p></li></ol> <h3 id="价值"><a href="#价值" class="header-anchor">#</a> 价值</h3> <p>虚拟 DOM 解决的关键问题有以下两个。</p> <ol><li>研发体验/研发效率的问题</li> <li>跨平台的问题</li></ol> <h3 id="栈调和"><a href="#栈调和" class="header-anchor">#</a> 栈调和</h3> <p><strong>Diff 确实是调和过程中最具代表性的一环</strong>，但是 <strong><code>调和 !== Diff</code></strong></p> <h2 id="setstate-是同步还是异步的"><a href="#setstate-是同步还是异步的" class="header-anchor">#</a> setState 是同步还是异步的</h2> <p>结论：<strong>并不是 setTimeout 改变了 setState，而是 setTimeout 帮助 setState “逃脱”了 React 对它的管控。只要是在 React 管控下的 setState，一定是异步的</strong></p> <h3 id="主流程"><a href="#主流程" class="header-anchor">#</a> 主流程：</h3> <p><img src="https://s0.lgstatic.com/i/image2/M01/04/81/Cip5yF_yswuAWzDfAAEc1lISh-Q211.png" alt="3.png"></p> <h3 id="锁结构"><a href="#锁结构" class="header-anchor">#</a> 锁结构</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function-variable function">reduce</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token comment">// 进来先锁上</span>
  isBatchingUpdates <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'reduce setState前的count'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">-</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'reduce setState后的count'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 执行完函数再放开</span>
  isBatchingUpdates <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><p>咱们开头锁上的那个 isBatchingUpdates，对 setTimeout 内部的执行逻辑完全没有约束力。因为 isBatchingUpdates 是在同步代码中变化的，而 setTimeout 的逻辑是异步执行的。当 this.setState 调用真正发生的时候，isBatchingUpdates 早已经被重置为了 false，这就使得当前场景下的 setState 具备了立刻发起同步更新的能力。所以咱们前面说的没错——<strong>setState 并不是具备同步这种特性，只是在特定的情境下，它会从 React 的异步管控中“逃脱”掉</strong>。</p> <h2 id="fiber"><a href="#fiber" class="header-anchor">#</a> Fiber</h2> <p>React 团队在用户体验方面最为要紧的一个追求。 <strong>快速响应</strong></p> <p><strong>实现增量渲染的目的，是为了实现任务的可中断、可恢复，并给不同的任务赋予不同的优先级，最终达成更加顺滑的用户体验</strong></p> <p>React 16 前，<strong>Reconciler(找不同)</strong> =&gt; <strong>Renderer(渲染不同)</strong> ，从 Reconciler 到 Renderer 这个过程是严格同步的。</p> <p>React 16以后，增加了一层 Scheduler（调度器），首先，<strong>每个更新任务都会被赋予一个优先级</strong>。当更新任务抵达调度器时，高优先级的更新任务（记为 A）会更快地被调度进 Reconciler 层；此时若有新的更新任务（记为 B）抵达调度器，调度器会检查它的优先级，若发现 B 的优先级高于当前任务 A，那么当前处于 Reconciler 层的 A 任务就会被<strong>中断</strong>，调度器会将 B 任务推入 Reconciler 层。当 B 任务完成渲染后，新一轮的调度开始，之前被中断的 <strong>A 任务将会被重新推入 Reconciler 层，继续它的渲染之旅，这便是所谓“可恢复”</strong>。</p> <h3 id=""><a href="#" class="header-anchor">#</a></h3></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/9/2021, 10:01:02 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/Basics/React/React_lagou.html" class="prev">
        React
      </a></span> <span class="next"><a href="/blog/Basics/Vue/Vue2_Source.html">
        Vue2 源码阅读
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.b35beac5.js" defer></script><script src="/blog/assets/js/2.682d0a90.js" defer></script><script src="/blog/assets/js/63.a4261fcd.js" defer></script>
  </body>
</html>
